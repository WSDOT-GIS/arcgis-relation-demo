Array.prototype.map&&window.Element.prototype.addEventListener?require(["esri/config","esri/map","esri/graphic","esri/layers/GraphicsLayer","esri/tasks/GeometryService","esri/tasks/RelationParameters","esri/toolbars/draw","esri/tasks/QueryTask","esri/tasks/query"],function(n,t,i,r,u,f,e,o,s){"use strict";function y(n){var i=document.getElementById("clearButton"),t=document.getElementById("geometryTypeSelect");n===!0?(a.deactivate(),h.setCursor("wait"),i.disabled=t.disabled=!0):(a.activate(e[t.value]),h.setCursor("auto"),document.body.style.cursor="auto",i.disabled=t.disabled=!1)}function w(n){window.console&&window.console.error&&window.console.error("error",n);y(!1)}function d(n){var t;t=new i(n);c.add(t);y(!1)}function k(n){return n.geometry}function g(n,t){for(var r=!1,i=0,u=n.length;i<u;i+=1)if(n[i]===t){r=!0;break}return r}function nt(n){function r(t){for(var r,f=[],i=0,u=t.length;i<u;i+=1)r=t[i],g(f,r.geometry1Index)||(l.add(n.features[r.geometry1Index]),f.push(r.geometry1Index));y(!1)}var t,i;i=n.features.map(k);c.graphics.length?(l.clear(),t=new f,t.geometries1=i,t.geometries2=c.graphics.map(k),t.relation=f.SPATIAL_REL_INTERIORINTERSECTION,p.relation(t,r,w)):p.union(i,d,w)}function tt(n){function r(n){t=new s;t.returnGeometry=!0;t.geometry=n instanceof Array?n[0]:n;b.execute(t).then(nt,w)}var t;y(!0);c.graphics.length?(p.intersect([n.geometry],c.graphics[0].geometry,r,w),v.add(new i(n.geometry))):r(n.geometry)}function it(){v.graphics.length?v.clear():l.graphics.length?l.clear():c.clear()}function rt(){c=new r({id:"serviceArea",className:"service-area",styling:!1});l=new r({id:"selection",className:"selection",styling:!1});v=new r({id:"userGraphics",className:"user-graphics",styling:!1});h.addLayer(c);h.addLayer(l);h.addLayer(v);a=new e(h);a.on("draw-complete",tt);y(!1);document.getElementById("clearButton").addEventListener("click",it);document.getElementById("geometryTypeSelect").addEventListener("change",function(){a.activate(e[this.value])})}var h,p,a,b,c,l,v;n.defaults.io.proxyUrl="proxy.ashx";p=new u("http://www.wsdot.wa.gov/geosvcs/ArcGIS/rest/services/Geometry/GeometryServer");b=new o("http://www.wsdot.wa.gov/geosvcs/ArcGIS/rest/services/Shared/CountyBoundaries/MapServer/0");h=new t("map",{basemap:"gray",center:[-120.80566406246835,47.413220330159461],zoom:7,showAttribution:!0});h.on("load",rt)}):function(){"use strict";var n;document.getElementById("map").removeNode(!0);document.getElementById("toolbar").removeNode(!0);n=document.createElement("p");n.innerHTML="Your browser is not supported. Try the latest version of one of the following: Firefox, Chrome, Internet Explorer.";document.body.appendChild(n)}();
//# sourceMappingURL=index.min.js.map